<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Period Timer</title>
<link rel='icon' href='timer.ico' type='image/x-icon'/ >
<link href="https://fonts.googleapis.com/css?family=Oswald:700|Roboto" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!--<link rel="stylesheet" href="jquery.countdown.css"> -->
<link rel="stylesheet" href="style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-countdown/2.0.2/jquery.plugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-countdown/2.0.2/jquery.countdown.js"></script>
<link rel="stylesheet" href="style.css">

</head>
<body class="back" onload="setTimeDefaults()">
<script>
$(document).ready(function() {
// default stylsheet
$("#css-default").click(function() {
$("link[rel=stylesheet]").attr({href : "style.css"});
});
 
// Antigo stylesheet
$("#antigo").click(function() {
$("link[rel=stylesheet]").attr({href : "style_a.css"});
});
 
// DCE stylesheet
$("#dce").click(function() {
$("link[rel=stylesheet]").attr({href : "style_e.css"});
});
 
// Wausau stylesheet
$("#wausau").click(function() {
$("link[rel=stylesheet]").attr({href : "style_w.css"});
});
});

</script>
<div class="timer">
    <form class="form">
    <div class="switch-field">
      <div class="switch-title">Where Are We Working Today?</div>
      <input type="radio" id="antigo" name="antigo">
      <label for="antigo">Antigo</label>
      <input type="radio" id="dce" name="dce">
      <label for="dce">DCE</label>
        <input type="radio" id="wausau" name="wausau">
      <label for="wausau">Wausau</label>
    </div>
    </form>
</div>

<h1>Period Timer</h1>

<!-- Set all the inputs to current date/time -->
<script>
function setTimeDefaults() {
    var now = new Date();
    var year = now.getFullYear();
    var month = now.getMonth() + 1;
    if (month < 10) {
    	month = "0" + month;
        }
    var date = now.getDate();
    if (date < 10) {
    	date = "0" + date;
        }
    var hours = now.getHours();
    if (hours < 10) {
    	hours = "0" + hours;
        }
    var minutes = now.getMinutes();
    if (minutes < 10) {
    	minutes = "0" + minutes;
        }
    
    nowISO = year + "-" + month + "-" + date + "T" + hours + ":" + minutes;
for (var i=1; i < 9; i++){
    document.getElementById("period" + i + "Time").defaultValue = nowISO; 
    }
}
</script> 

<!--Script and Div for Period 1 -->

<div class="timer" >
<!--<p>Period 1</p>-->
<input class="tbox" type="text" value = "First Period">
<input type="datetime-local" id="period1Time">
<button id="first" >Set Period 1 End Time</button>
<div id="period1" class="defaultCountdown"></div>
</div>
<script>
document.getElementById("first").onclick = setPeriod("#period1", "period1Time");

function setPeriod(div, getTime) {
    return function(a,b){
    //var getTime = "period1Time";
    //var div = "#period1";
    console.log(div);
    $(div).countdown('destroy');
    var endPeriod = new Date(document.getElementById(getTime).value);
        $(function() {
            $(div).countdown({until: endPeriod, format: 'hMS',
            padZeroes: true,
            onExpiry: notifyMe                       
                        });
	   });
    }
}

</script>

<!-- Script and Div for Period 2 -->
<div class="timer" >
<input class="tbox" type="text" value = "Second Period">
<input type="datetime-local" id="period2Time">
<button id="second" >Set Period 2 End Time</button>
<div id="period2" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("second").onclick = setPeriod("#period2", "period2Time");

</script> 
<!-- Script and Div for Period 3 -->
<div class="timer" >
<input class="tbox" type="text" value = "Third Period">
<input type="datetime-local" id="period3Time">
<button id="third" >Set Period 3 End Time</button>
<div id="period3" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("third").onclick = setPeriod("#period3", "period3Time");
</script>
<!-- Script and Div for Period 4 -->
<div class="timer" >
<input class="tbox" type="text" value = "Fourth Period">
<input type="datetime-local" id="period4Time">
<button id="fourth" >Set Period 4 End Time</button>
<div id="period4" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("fourth").onclick = setPeriod("#period4", "period4Time");

</script>
<!-- Script and Div for Period 5 -->
<div class="timer" >
<input class="tbox" type="text" value = "Fifth Period">
<input type="datetime-local" id="period5Time">
<button id="fifth" >Set Period 5 End Time</button>
<div id="period5" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("fifth").onclick = setPeriod("#period5", "period5Time");

</script>
<!-- Script and Div for Period 6 -->
<div class="timer" >
<input class="tbox" type="text" value = "Sixth Period">
<input type="datetime-local" id="period6Time">
<button id="sixth" >Set Period 6 End Time</button>
<div id="period6" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("sixth").onclick = setPeriod("#period6", "period6Time");

</script>
<!-- Script and Div for Period 7 -->
<div class="timer" >
<input class="tbox" type="text" value = "Seventh Period">
<input type="datetime-local" id="period7Time">
<button id="seventh" >Set Period 7 End Time</button>
<div id="period7" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("seventh").onclick = setPeriod("#period7", "period7Time");
f
</script>
<!-- Script and Div for Period 8 -->
<div class="timer" >
<input class="tbox" type="text" value = "Eighth Period">
<input type="datetime-local" id="period8Time">
<button id="eighth" >Set Period 8 End Time</button>
<div id="period8" class="defaultCountdown"></div>
</div>

<script>
document.getElementById("eighth").onclick = setPeriod("#period8", "period8Time");

</script>
<script>
function notifyMe() {
  if (!("Notification" in window)) {
    alert("This browser does not support desktop notification");
  }
  else if (Notification.permission === "granted") {
        var options = {
                body: "Time is up this Period!",
                icon: "timer.ico",
                dir : "ltr"
             };
          var notification = new Notification("From Your Timer:",options);
  }
  else if (Notification.permission !== 'denied') {
    Notification.requestPermission(function (permission) {
      if (!('permission' in Notification)) {
        Notification.permission = permission;
      }
    
      if (permission === "granted") {
        var options = {
              body: "Time is up this Period!",
              icon: "timer.ico",
              dir : "ltr"
          };
        var notification = new Notification("This is your Timer speaking:",options);
      }
    });
  }
}
</script>
</body>
</html>